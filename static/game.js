// import { getMyDestinations } from "./dest.js"

$playButton = document.getElementById('playButton')
$gameArea = document.getElementById('gameArea')
$testButton = document.getElementById('testButton')

// This function will find the destinations the user has added and create questions about them. 
// This will be done by using axios to find the destinations within my own api, 

$testButton.addEventListener('click', testAddDestinations())

async function getAllDestinations(){
    res = await axios.get('https://restcountries.com/v3.1/all')

    return res
}

async function getCountry(country){
    res = await axios.get(`https://restcountries.com/v3.1/name/${country}`)

    return res
}

async function getMyDestinations(){
    res = await axios.get('http://localhost:5001/myDestinations')

    return res
}

function testAddDestinations(){
    res = getMyDestinations()
    newh3 = document.createElement('h3')
    newh3.innerText = res.data
    $gameArea.append(newh3)
}

// I need a function that gets all possible countries to use as incorrect answers, gets the user's current countries as correct answers, then returns an object with a prompt, one correct answer, and three incorrect answers. 
function generateQuestions(country){
    res = getCountry(country)
    resTwo = getAllDestinations()
    possiblePrompt = ["capital", "population", "region"]
    prompt = possiblePrompt[Math.round(Math.random()*3)]

    correctAnswer = res.data[0][prompt]

    return {prompt: prompt, correctAnswer: correctAnswer, wrongAnwerOne: "", wrongAnswerTwo: "", wrongAnswerThree: ""}
}

// This function will take an object (generated by generateQuestions) and an answer (chosen by the user) and then return true or false
function checkChosenAnswer(obj, answer){


}

function createTable(){
    res = getMyDestinations()
    res2 = getAllCountries()


    // Element Creation
    newTable = document.createElement('table')
    thead = document.createElement('thead')
    tbody = document.createElement('tbody')
    trOne = document.createElement('tr')
    trTwo = document.createElement('tr')
    trThree = document.createElement('tr')
    tdOne = document.createElement('td')
    tdTwo = document.createElement('td')
    tdThree = document.createElement('td')
    tdFour = document.createElement('td')
    tdFive = document.createElement('td')

    // Element Text
    tdOne.innerText = `What is the capital of ${res.data[Math.round(Math.random()*res.data.length)]}`
    tdTwo.innerText = ''
    tdThree.innerText = 'Question Two'
    tdFour.innerText = 'Question Three'
    tdFive.innerText = 'Question Four'

    // Element Id
    newTable.id = 'gameTable'
    thead.id = 'gameHead'
    tbody.id = 'gameBody'
    trOne.id = 'topRow'
    trTwo.id = 'middleRow'
    trThree.id = 'botRow'
    tdOne.id = 'prompt'
    tdTwo.id = 'questionOne'
    tdThree.id = 'questionTwo'
    tdFour.id = 'questionThree'
    tdFive.id = 'questionFour'

    // Element Class
    newTable.className = 'gameTable'
    thead.className = 'gameHead'
    tbody.className = 'gameBody'
    trOne.className = 'promptRow'
    trTwo.className = 'topQuestions'
    trThree.className = 'botQuestions'
    tdOne.className = 'prompt'
    tdTwo.className = 'question'
    tdThree.className = 'question'
    tdFour.className = 'question'
    tdFive.className = 'question'

    // Element Appending
    trThree.append(tdFour, tdFive)
    trTwo.append(tdThree, tdTwo)
    trOne.append(tdOne)
    tbody.append(trThree, trTwo)
    thead.append(trOne)
    newTable.append(thead, tbody)

    $gameArea.append(newTable)

}

$playButton.addEventListener('click', function(){
    if(this.className == 'startButton'){
        this.innerText = 'Reset'
        this.className = 'resetButton'
        console.log(this)
        createTable()
    } else {
        createTable()
        document.getElementById('gameTable').remove()
    }
})